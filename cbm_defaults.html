<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 CBM_defaults | CBM Spades Manual</title>
<meta name="author" content="Céline Boisvenue">
<meta name="description" content="This documentation is work in progress. Potential discrepancies and omissions may exist for the time being. If you find any regarding this module, contact us here.  2.1 Overview CBM_defaults reads...">
<meta name="generator" content="bookdown 0.42 with bs4_book()">
<meta property="og:title" content="Chapter 2 CBM_defaults | CBM Spades Manual">
<meta property="og:type" content="book">
<meta property="og:description" content="This documentation is work in progress. Potential discrepancies and omissions may exist for the time being. If you find any regarding this module, contact us here.  2.1 Overview CBM_defaults reads...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 CBM_defaults | CBM Spades Manual">
<meta name="twitter:description" content="This documentation is work in progress. Potential discrepancies and omissions may exist for the time being. If you find any regarding this module, contact us here.  2.1 Overview CBM_defaults reads...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="v. 0.1">CBM Spades Manual</a>:
        <small class="text-muted">v. 0.1</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> About</a></li>
<li><a class="active" href="cbm_defaults.html"><span class="header-section-number">2</span> CBM_defaults</a></li>
<li><a class="" href="cbm_dataprep_sk.html"><span class="header-section-number">3</span> CBM_dataPrep_SK</a></li>
<li><a class="" href="cbm_vol2biomass.html"><span class="header-section-number">4</span> CBM_vol2biomass</a></li>
<li><a class="" href="cbm_core.html"><span class="header-section-number">5</span> CBM_core</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/camillegiuliano/CBMspadesManual">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="cbm_defaults" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> CBM_defaults<a class="anchor" aria-label="anchor" href="#cbm_defaults"><i class="fas fa-link"></i></a>
</h1>
<div class="rmdimportant">
<p>This documentation is work in progress. Potential discrepancies and omissions may exist for the time being. If you find any regarding this module, contact us <a href="%22https://github.com/PredictiveEcology/CBM_defaults/issues%22">here</a>.</p>
</div>
<div id="overview" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Overview<a class="anchor" aria-label="anchor" href="#overview"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://github.com/PredictiveEcology/CBM_defaults.git">CBM_defaults</a> reads in default parameters for the managed forest of Canada. In <em>SpaDES-speak</em>, it has one event (<code>init</code>). On its own, this module provides R-based access to all defaults <strong>CBM</strong> parametersfor the managed forests of Canada. As part of <a href="https://github.com/PredictiveEcology/spadesCBM.git">spadesCBM</a>, it provides simulations with default parameter values for the managed forests of Canada, akin to the Archive Index in the CBM-CFS3 documentation. Most parameters are read in from an SQLite database (link below), with some defaults, modified from CBM-CFS3 to accommodate the capacity for a more flexible representation of vegetation dynamics enable by the <code>libcbm</code> Python functions used, available <a href="https://github.com/cat-cfs/libcbm_py/tree/main/libcbm/resources/cbm_exn">here</a>. Defaults for the managed forests of Canada include disturbance data such as different disturbance types and their IDs, spinup parameters, pool names, and more. The outputs of this module are used by <a href="https://github.com/PredictiveEcology/CBM_dataPrep_SK.git">CBM_dataPrep_SK</a> and <a href="https://github.com/PredictiveEcology/CBM_core.git">CBM_core</a> in <a href="https://github.com/PredictiveEcology/spadesCBM.git">spadesCBM</a> simulations.</p>
</div>
<div id="list-of-input-objects" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> List of input objects<a class="anchor" aria-label="anchor" href="#list-of-input-objects"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-table"><table style="width:100%;" class="table table-sm">
<colgroup>
<col width="24%">
<col width="24%">
<col width="26%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th>Name</th>
<th>Class</th>
<th>Description</th>
<th>Source</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Archive Index</td>
<td>SQL Database</td>
<td>SQLite database file for CFS_CBM3 default tables</td>
<td><a href="https://github.com/cat-cfs/libcbm_py/tree/main/libcbm/resources/cbm_defaults_db" class="uri">https://github.com/cat-cfs/libcbm_py/tree/main/libcbm/resources/cbm_defaults_db</a></td>
</tr>
<tr class="even">
<td>Disturbance Matrix Association</td>
<td>Data table</td>
<td>Default disturbance IDs</td>
<td><a href="https://raw.githubusercontent.com/cat-cfs/libcbm_py/main/libcbm/resources/cbm_exn/disturbance_matrix_association.csv" class="uri">https://raw.githubusercontent.com/cat-cfs/libcbm_py/main/libcbm/resources/cbm_exn/disturbance_matrix_association.csv</a></td>
</tr>
<tr class="odd">
<td>Disturbance Matrix Value</td>
<td>Data table</td>
<td>Default disturbance data</td>
<td><a href="https://raw.githubusercontent.com/cat-cfs/libcbm_py/main/libcbm/resources/cbm_exn/disturbance_matrix_value.csv" class="uri">https://raw.githubusercontent.com/cat-cfs/libcbm_py/main/libcbm/resources/cbm_exn/disturbance_matrix_value.csv</a></td>
</tr>
<tr class="even">
<td>ecoLocator</td>
<td>Shapefile</td>
<td>Canada’s ecozone as polygon features</td>
<td><a href="http://sis.agr.gc.ca/cansis/nsdb/ecostrat/zone/ecozone_shp.zip" class="uri">http://sis.agr.gc.ca/cansis/nsdb/ecostrat/zone/ecozone_shp.zip</a></td>
</tr>
<tr class="odd">
<td>spuLocator</td>
<td>Shapefile</td>
<td>Canada’s spatial units as polygon features</td>
<td><a href="https://drive.google.com/file/d/1D3O0Uj-s_QEgMW7_X-NhVsEZdJ29FBed" class="uri">https://drive.google.com/file/d/1D3O0Uj-s_QEgMW7_X-NhVsEZdJ29FBed</a></td>
</tr>
</tbody>
</table></div>
</div>
<div id="module-functioning" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Module functioning<a class="anchor" aria-label="anchor" href="#module-functioning"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>The SQLite database, and a selection of the <code>cbm_exn</code> resource files are downloaded and stored into the user’s Inputs folder from GitHub using the <code>reproducible::prepInputs</code> function, a useful tool in the <code>SpaDES</code> toolkit.</li>
<li>Parameters necessary for <em>spadesCBM</em> simulations are extracted from the downloaded files. Each of these are saved as objects in the <code>simList</code> (see list of output objects above).</li>
<li>The <code>species_tr</code> object is created to match a species name to the provided growth curve.</li>
<li>The <code>disturbanceMatrix</code> and <code>cTransfers</code> objects help identify which carbon transfers matches the provided disturbances as it matches the transfer matrix IDs and the proportions transferred to disturbance names.</li>
<li>Parameters for the <code>spinup</code> event in the <code>CBM_core</code> modules are assembled in the spinupSQL object.</li>
<li>
<code>pooldef</code> gives the names of each carbon pool that exists in CBM.</li>
<li>Objects that narrow the parameter selection for the study area are <code>spuLocator</code> and <code>ecolocator</code>
</li>
</ul>
</div>
<div id="list-of-output-objects" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> List of output objects<a class="anchor" aria-label="anchor" href="#list-of-output-objects"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="27%">
<col width="17%">
<col width="55%">
</colgroup>
<thead><tr class="header">
<th>Name</th>
<th>Class</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>species_tr</td>
<td>Data table</td>
<td>Default species data</td>
</tr>
<tr class="even">
<td>disturbanceMatrix</td>
<td>Data table</td>
<td>Default disturbance data</td>
</tr>
<tr class="odd">
<td>cTransfers</td>
<td>Data table</td>
<td>Default disturbance data</td>
</tr>
<tr class="even">
<td>spinupSQL</td>
<td>Data table</td>
<td>Parameters for <a href="https://github.com/PredictiveEcology/CBM_core.git">CBM_core</a> spinup event</td>
</tr>
<tr class="odd">
<td>pooldef</td>
<td>Character</td>
<td>Vector of pools</td>
</tr>
<tr class="even">
<td>ecoLocator</td>
<td>Shapefile</td>
<td>Canada’s ecozone as polygon features with ecozone IDs</td>
</tr>
<tr class="odd">
<td>spuLocator</td>
<td>Shapefile</td>
<td>Canada’s spatial units as polygon features with spatial unit IDs</td>
</tr>
</tbody>
</table></div>
</div>
<div id="background" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Background<a class="anchor" aria-label="anchor" href="#background"><i class="fas fa-link"></i></a>
</h2>
<p>This example uses default parameters that were created for use in CBM-CFS3. Few of these parameters have source references. The ones who do are outline in the <a href="https://osdp-psdo.canada.ca/dp/en/search/metadata/NRCAN-CFS-1-7570539d-a457-43ef-9215-584ad612f409">Operational-scale Carbon Budget Model of the Canadian Forest Sector (CBM-CFS3) version 1.2: user’s guide</a>. <a href="https://github.com/PredictiveEcology/CBM_defaults.git">CBM_defaults</a> brings the parameters to an R-environment, for easy user-access and modifications.</p>
</div>
<div id="usage-1" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Usage<a class="anchor" aria-label="anchor" href="#usage-1"><i class="fas fa-link"></i></a>
</h2>
<p>This module can run independently by running the global script below. Run independently, it provides transparent access tp default parameters for all managed forests of Canada for <em>CBM</em> simulations.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">projectPath</span> <span class="op">&lt;-</span> <span class="st">"~/CBM_defaults"</span></span>
<span><span class="va">repos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"predictiveecology.r-universe.dev"</span>, <span class="fu"><a href="https://rdrr.io/r/base/options.html">getOption</a></span><span class="op">(</span><span class="st">"repos"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"SpaDES.project"</span><span class="op">)</span> <span class="op">&lt;</span> <span class="st">"0.1.1"</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"Require"</span><span class="op">)</span> <span class="op">&lt;</span> <span class="st">"1.0.1.9002"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span>error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SpaDES.project"</span>, <span class="st">"Require"</span><span class="op">)</span>, repos <span class="op">=</span> <span class="va">repos</span><span class="op">)</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">SpaDES.project</span><span class="fu">::</span><span class="fu"><a href="http://spades-project.predictiveecology.org/reference/setupProject.html">setupProject</a></span><span class="op">(</span></span>
<span>  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>projectPath <span class="op">=</span> <span class="va">projectPath</span><span class="op">)</span>,</span>
<span>  </span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span></span>
<span>    repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="va">repos</span><span class="op">)</span>,</span>
<span>    reproducible.destinationPath <span class="op">=</span> <span class="st">"inputs"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  modules <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"PredictiveEcology/CBM_defaults@main"</span><span class="op">)</span>,</span>
<span>  require <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"SpaDES.core"</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">outDefaults</span> <span class="op">&lt;-</span> <span class="fu">SpaDES.core</span><span class="fu">::</span><span class="fu">simInitAndSpades2</span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html"><span class="header-section-number">1</span> About</a></div>
<div class="next"><a href="cbm_dataprep_sk.html"><span class="header-section-number">3</span> CBM_dataPrep_SK</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#cbm_defaults"><span class="header-section-number">2</span> CBM_defaults</a></li>
<li><a class="nav-link" href="#overview"><span class="header-section-number">2.1</span> Overview</a></li>
<li><a class="nav-link" href="#list-of-input-objects"><span class="header-section-number">2.2</span> List of input objects</a></li>
<li><a class="nav-link" href="#module-functioning"><span class="header-section-number">2.3</span> Module functioning</a></li>
<li><a class="nav-link" href="#list-of-output-objects"><span class="header-section-number">2.4</span> List of output objects</a></li>
<li><a class="nav-link" href="#background"><span class="header-section-number">2.5</span> Background</a></li>
<li><a class="nav-link" href="#usage-1"><span class="header-section-number">2.6</span> Usage</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/camillegiuliano/CBMspadesManual/blob/master/modules//CBM_defaults/CBM_defaults.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/camillegiuliano/CBMspadesManual/edit/master/modules//CBM_defaults/CBM_defaults.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>CBM Spades Manual</strong>: v. 0.1" was written by Céline Boisvenue. It was last built on 26 June 2024.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
